/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0 0 $margin2;
    @include breakpoint(big-baby-sleep) { 
    margin: 0 auto $margin2;
    text-align: center;
  }
}

.read, .layout-full-read, .layout-read {
	figure {
		@include breakpoint(teen) {
			margin-bottom: 0;
		}
	}
}
/*add bar before caption on .read */
.fullimg figcaption:before, .imgright figcaption:before {
	@include breakpoint(teen-up) {
		content: '';
		border-bottom: .4em solid $color3;
		margin-top: $margin2*2;
		margin-bottom: $margin2;
		width: 60%;
		display: block;
	}
}

/*aside margins for read */
.read .priority1and2, .layout-full .priority1and2, /*static class*/ 
.layout-full-read /*drupal*/, 
.layout-read /*drupal*/,
.layout-full .field-name-body /*drupal*/{
	aside, .aside {
		@include breakpoint(teen-up) {
			width: $smallratio;
			margin-top: $margin2;
			margin-bottom: $margin2/2;
		}
	}
}
/*space between image and main body on read with sidebar */
.read .priority1and2,
.layout-read {
	.aside, aside {
		@include breakpoint(teen-up) {
			float: right;
			clear: right;
			padding-left: $margin4;
			figcaption:before {
				display: none;
			}
			figcaption {
				width: 100%;
			}
		}
	}
}

/*full article, set aside to left*/
.layout-full, 
.read .layout-full, 
.layout-full-read
{
	aside, .aside {
		@include breakpoint(teen-up) {
			float: left;
			clear: left;
		}
		figcaption {
				width: 100%;
			}
	}
}


/*margin-left for asides*/
@if $drupal {
	.layout-full-read {
		 #block-views-aside-block, .aside, aside {
			@include breakpoint(teen-up) {
				margin-left: $margin4;
			}
		}
	}
}

@else {
	/*read full article, add margin to aside*/
	.read .layout-full {
		 .aside, aside {
			@include breakpoint(teen-up) {
				margin-left: $margin4;
			}
		}
	}
}



/*correct above rule so that aside within priority1and2 is flush left*/
.layout-full .priority1and2, .layout-full .field-name-body, .layout-full-read, .layout-read {
	aside, .aside{
		@include breakpoint(teen-up) {
			margin-left: 0;
		}
	}
}


.read, .layout-full-read, .layout-read {
	.left {
		@include breakpoint(teen) {
			width: 100% - $smallratio;
			float: left;
			clear: left;
			margin: 0 0 $margin2/2;
			padding-right: $margin2;
		}
	}
}
figcaption {
	@include breakpoint(adult) {
		margin-bottom: $margin2;
	}
}



/*add bar before caption on .read */
.withsidebar .fullimg, .layout-read .fullimg, /*drupal equivalent, drupal has class on body level, while iModules has it as an interior*/
.withsidebar .imgright .layout-read .imgright /*drupal equivalent*/ {
	figcaption:before {
		@include breakpoint(teen-up) {
			margin-top: $margin5;
		}
	}
}
/*space between figcaption and mainbody on article with sidebar */
.read .withsidebar, .layout-read /*drupal equivalent*/{ 
	figcaption {
		@include breakpoint(teen-up) {
			margin-left: $margin4;
			margin-bottom: $margin2;
			float: right;
		}
	}
}


.layout-full .imgright figcaption, .layout-full-read .imgright figcaption {
	@include breakpoint(adult) {
		@include transform( translateY(-100%) );
	}
	@include ie8{
		width: 30em;
		float: none;
		clear: left;
		margin-left: $ratio;
		margin-top: 0;
		margin-bottom: $margin2;
		display: block;
	}
}

/*this corresponds to typgoraphy-p: read p margins*/
figure.symmetry, img.symmetry {
	@include breakpoint(teen-up) { 
		margin-left: $margin4;
		font-size: 1em;
		margin-bottom: $margin2;
	}
	@include breakpoint(adult) {
		font-size: .9em;
	}
}
.withsidebar, .layout-read /*drupal equivalent*/{ 
		img.symmetry {
		@include breakpoint(teen-up) {  
			padding-right: $margin4;
		}
	}
}

.layout-full figure.symmetry, .layout-full img.symmetry,
.layout-full-read figure.symmetry, .layout-full-read img.symmetry {
	@include breakpoint(teen-up) {
		margin-left: $ratio;
		margin-right: $margin4;
	}
}

.read .symmetry figcaption,
.layout-full-read .symmetry figcaption,
.layout-read .symmetry figcaption {
	@include breakpoint(teen-up) { 
		margin-left: 0;
		float: none;
	}
}
